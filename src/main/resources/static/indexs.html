<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

    <title>四个小可爱考试平台_在线考试</title>
    <link href="css/main.css" rel="stylesheet" type="text/css"/>
    <link href="css/iconfont.css" rel="stylesheet" type="text/css"/>
    <link href="css/test.css" rel="stylesheet" type="text/css"/>
    <script src="js/vue/vue.min.js"></script>
    <style>
        .hasBeenAnswer {
            background: #5d9cec;
            color: #fff;
        }

    </style>
    <script>
        var obj =JSON.parse(localStorage.getItem("kaishi"));
    </script>
</head>

<body>
<div id="app">
    <div class="main">
        <!--nr start-->
        <div class="test_main">
            <div class="nr_left" id="clicks">
                <div class="test">
                    <form>
                        <div class="test_title">
                            <p class="test_time">
                                <i class="icon iconfont">&#xe6fb;</i><b class="alt-1">{{time}}</b>
                            </p>
                            <font><input type="button" name="test_jiaojuan" value="交卷" v-on:click="jiaojuan"></font>
                        </div>
                        <div v-for="item,index in datalist">
                            <div v-if="item.list[0].qbtpye=='单选题'">
                                <div class="test_content">
                                    <div class="test_content_title">
                                        <h2>单选题</h2>
                                        <p>
                                            <span>共</span><i class="content_lit">60</i><span>题，</span><span>合计</span><i
                                                class="content_fs">60</i><span>分</span>
                                        </p>
                                    </div>
                                </div>
                                <div class="test_content_nr">
                                    <ul>
                                        <li :id="['qu_'+index+'_'+indexs]" v-for="items,indexs in item.list">
                                            <div class="test_content_nr_tt">
                                                <i>{{items.tqnum}}</i><span>({{items.tqscore}}分)</span><font>{{items.qbtext}}（
                                                ）</font><b
                                                    class="icon iconfont">&#xe881;</b>
                                            </div>

                                            <div class="test_content_nr_main">
                                                <ul>

                                                    <li class="option" v-for="item1,index1 in items.qboptions">
                                                        <input type="radio" class="radioOrCheck" name="answer1"
                                                               :id="['answer_'+index+'_'+indexs+'_'+index1]"
                                                               v-model="items.answer" :value="zifu[index1]"
                                                        />
                                                        <label :for="['answer_'+index+'_'+indexs+'_'+index1]">
                                                            <!--A.-->
                                                            <p class="ue" style="display: inline;">
                                                                {{item1}}</p>
                                                        </label>
                                                    </li>
                                                </ul>
                                            </div>
                                        </li>

                                    </ul>
                                </div>
                            </div>
                            <div v-if="item.list[0].qbtpye=='多选题'">
                                <div class="test_content">
                                    <div class="test_content_title">
                                        <h2>多选题</h2>
                                        <p>
                                            <span>共</span><i class="content_lit">30</i><span>题，</span><span>合计</span><i
                                                class="content_fs">30</i><span>分</span>
                                        </p>
                                    </div>
                                </div>
                                <div class="test_content_nr">
                                    <ul>

                                        <li :id="['qu_'+index+'_'+indexs]" v-for="items,indexs in item.list">
                                            <div class="test_content_nr_tt">
                                                <i>{{items.tqnum}}</i><span>({{items.tqscore}}分)</span><font>{{items.qbtext}}（
                                                ）</font><b
                                                    class="icon iconfont">&#xe881;</b>
                                            </div>

                                            <div class="test_content_nr_main">
                                                <ul>
                                                    <li class="option" v-for="item1,index1 in items.qboptions">
                                                        <input type="checkbox" class="radioOrCheck" name="answer1"
                                                               :id="['answer_'+index+'_'+indexs+'_'+index1]"
                                                               v-model="items.answer" :value="zifu[index1]"
                                                        />
                                                        <label :for="['answer_'+index+'_'+indexs+'_'+index1]">
                                                            <!--A.-->
                                                            <p class="ue" style="display: inline;">
                                                                {{item1}}</p>
                                                        </label>
                                                    </li>
                                                </ul>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div v-if="item.list[0].qbtpye=='判断题'">
                                <div class="test_content">
                                    <div class="test_content_title">
                                        <h2>判断题</h2>
                                        <p>
                                            <span>共</span><i class="content_lit">30</i><span>题，</span><span>合计</span><i
                                                class="content_fs">30</i><span>分</span>
                                        </p>
                                    </div>
                                </div>

                                <div class="test_content_nr">
                                    <ul>
                                        <li :id="['qu_'+index+'_'+indexs]" v-for="items,indexs in item.list">
                                            <div class="test_content_nr_tt">
                                                <i>{{items.tqnum}}</i><span>({{items.tqscore}}分)</span><font>{{items.qbtext}}（
                                                ）</font><b
                                                    class="icon iconfont">&#xe881;</b>
                                            </div>
                                            <div class="test_content_nr_main">
                                                <ul>

                                                    <li class="option">
                                                        <input type="radio" name="answer1"
                                                               id="1_answer_1_option_89" v-model="items.answer"
                                                               value="正确"
                                                        />
                                                        <label for="1_answer_1_option_89">
                                                            正确
                                                        </label>
                                                    </li>
                                                    <li class="option">
                                                        <input type="radio" name="answer1"
                                                               id="1_answer_1_option_80" v-model="items.answer"
                                                               value="错误"
                                                        />
                                                        <label for="1_answer_1_option_80">
                                                            错误
                                                        </label>
                                                    </li>


                                                </ul>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div v-if="item.list[0].qbtpye=='填空题'">
                                <div class="test_content">
                                    <div class="test_content_title">
                                        <h2>填空题</h2>
                                        <p>
                                            <span>共</span><i class="content_lit">30</i><span>题，</span><span>合计</span><i
                                                class="content_fs">30</i><span>分</span>
                                        </p>
                                    </div>
                                </div>

                                <div class="test_content_nr">
                                    <ul>
                                        <li :id="['qu_'+index+'_'+indexs]" v-for="items,indexs in item.list">
                                            <div class="test_content_nr_tt">
                                                <i>{{items.tqnum}}</i><span>({{items.tqscore}}分)</span><font>{{items.qbtext}}</font><b
                                                    class="icon iconfont">&#xe881;</b>
                                            </div>

                                            <div class="test_content_nr_main">
                                                <ul>

                                                    <li v-for="item1,index1 in items.answer">
                                                        <label>
                                                            答案{{index1+1}}
                                                        </label>
                                                        <input type="text" v-model="item1.content"/>
                                                    </li>
                                                </ul>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div v-if="item.list[0].qbtpye=='问答题'">
                                <div class="test_content">
                                    <div class="test_content_title">
                                        <h2>问答题</h2>
                                        <p>
                                            <span>共</span><i class="content_lit">30</i><span>题，</span><span>合计</span><i
                                                class="content_fs">30</i><span>分</span>
                                        </p>
                                    </div>
                                </div>

                                <div class="test_content_nr">
                                    <ul>
                                        <li :id="['qu_'+index+'_'+indexs]" v-for="items,indexs in item.list">
                                            <div class="test_content_nr_tt">
                                                <i>{{items.tqnum}}</i><span>({{items.tqscore}}分)</span><font>{{items.qbtext}}</font><b
                                                    class="icon iconfont">&#xe881;</b>
                                            </div>

                                            <div class="test_content_nr_main">
                                                <ul>
                                                    <li><textarea v-model="item.answer"> </textarea></li>
                                                </ul>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div v-if="item.list[0].qbtpye=='程序题'">
                                <div class="test_content">
                                    <div class="test_content_title">
                                        <h2>程序题</h2>
                                        <p>
                                            <span>共</span><i class="content_lit">30</i><span>题，</span><span>合计</span><i
                                                class="content_fs">30</i><span>分</span>
                                        </p>
                                    </div>
                                </div>

                                <div class="test_content_nr">
                                    <ul>
                                        <li :id="['qu_'+index+'_'+indexs]" v-for="items,indexs in item.list">
                                            <div class="test_content_nr_tt">
                                                <i>{{items.tqnum}}</i><span>({{items.tqscore}}分)</span><font>{{items.qbtext}}（
                                                ）</font><b
                                                    class="icon iconfont">&#xe881;</b>
                                            </div>

                                            <div class="test_content_nr_main">
                                                <ul>

                                                    <li>
                                                        <form method="post">
                                                            <input type="file"/>
                                                        </form>
                                                    </li>
                                                </ul>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>

            </div>
            <div class="nr_right">
                <div class="nr_rt_main">
                    <div class="rt_nr1">
                        <div class="rt_nr1_title">
                            <h1>
                                <i class="icon iconfont">&#xe692;</i>答题卡
                            </h1>
                            <p class="test_time">
                                <i class="icon iconfont">&#xe6fb;</i><b class="alt-1">01:40</b>
                            </p>
                        </div>
                        <div v-for="item,index in datalist">
                            <div class="rt_content" v-if="item.list[0].qbtpye=='单选题'">
                                <div class="rt_content_tt" >
                                    <h2>单选题</h2>
                                    <p>
                                        <span>共</span><i class="content_lit">60</i><span>题</span>
                                    </p>
                                </div>
                                <div class="rt_content_nr answerSheet">
                                    <ul>
                                        <li v-for="items,indexs in item.list"><a :href="['#qu_'+index+'_'+indexs]">{{items.tqnum}}</a></li>
                                    </ul>
                                </div>
                            </div>

                            <div class="rt_content" v-if="item.list[0].qbtpye=='多选题'">
                                <div class="rt_content_tt">
                                    <h2>多选题</h2>
                                    <p>
                                        <span>共</span><i class="content_lit">30</i><span>题</span>
                                    </p>
                                </div>
                                <div class="rt_content_nr answerSheet">
                                    <ul>
                                        <li v-for="items,indexs in item.list"><a :href="['#qu_'+index+'_'+indexs]">{{items.tqnum}}</a></li>
                                    </ul>
                                </div>
                            </div>

                            <div class="rt_content" v-if="item.list[0].qbtpye=='填空题'">
                                <div class="rt_content_tt">
                                    <h2>填空题</h2>
                                    <p>
                                        <span>共</span><i class="content_lit">30</i><span>题</span>
                                    </p>
                                </div>
                                <div class="rt_content_nr answerSheet">
                                    <ul>
                                        <li v-for="items,indexs in item.list"><a :href="['#qu_'+index+'_'+indexs]">{{items.tqnum}}</a></li>
                                    </ul>
                                </div>
                            </div>
                            <div class="rt_content" v-if="item.list[0].qbtpye=='问答题'">
                                <div class="rt_content_tt">
                                    <h2>问答题</h2>
                                    <p>
                                        <span>共</span><i class="content_lit">30</i><span>题</span>
                                    </p>
                                </div>
                                <div class="rt_content_nr answerSheet">
                                    <ul>
                                        <li v-for="items,indexs in item.list"><a :href="['#qu_'+index+'_'+indexs]">{{items.tqnum}}</a></li>
                                    </ul>
                                </div>
                            </div>
                            <div class="rt_content" v-if="item.list[0].qbtpye=='程序题'">
                                <div class="rt_content_tt">
                                    <h2>程序题</h2>
                                    <p>
                                        <span>共</span><i class="content_lit">30</i><span>题</span>
                                    </p>
                                </div>
                                <div class="rt_content_nr answerSheet">
                                    <ul>
                                        <li v-for="items,indexs in item.list"><a :href="['#qu_'+index+'_'+indexs]">{{items.tqnum}}</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--nr end-->
    <div class="foot"></div>
</div>

<script type='text/javascript' src='http://cdn.staticfile.org/jquery/2.1.1/jquery.min.js'></script>

<script src="js/jquery.easy-pie-chart.js"></script>
<!--时间js-->
<script src="time/jquery.countdown.js"></script>
<script>
    window.jQuery(function ($) {
        "use strict";

        $('time').countDown({
            with_separators: false
        });
        $('.alt-1').countDown({
            css_class: 'countdown-alt-1'
        });
        $('.alt-2').countDown({
            css_class: 'countdown-alt-2'
        });

    });


    $(function () {
        $('#clicks').on("click", "li.option", function () {
            // debugger;
            var examId = $(this).closest('.test_content_nr_main').closest('li').attr('id'); // 得到题目ID
            var cardLi = $('a[href=#' + examId + ']'); // 根据题目ID找到对应答题卡
            // 设置已答题
            if (!cardLi.hasClass('hasBeenAnswer')) {
                cardLi.addClass('hasBeenAnswer');
            }
        })
    });
</script>
</body>
<script>
    var zifu = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'];
    var vue = new Vue({
        el: "#app",
        data: {
            datalist: [],
            zifu: zifu,
            time:"101:01"
        },
        methods: {
            jiaojuan:function () {
                if(confirm("确定交卷吗")){
                    for(var i=0;i<this.datalist.length;i++){
                        for(var j=0;j<this.datalist[i].list.length;j++){
                            if(this.datalist[i].list[j].qbtpye=="多选题"){
                                console.log(this.datalist[i].list[j].answer)
                                this.datalist[i].list[j].answer=this.datalist[i].list[j].answer.join("");
                            }
                        }
                    }
                    console.log(this.datalist)
                    if(obj.tptype!="安排考试"){

                    }
                }
            }
        }
    });
    $.post("../tqfindbytimu.do", {tpid: 4}, function (data) {
        vue.datalist = sortzl(data);
    });

    //数据处理
    function sortzl(data) {
        for (var i = 0; i < data.length; i++) {
            if (data[i].qbtpye == "单选题") {
                data[i].qboptions = data[i].qboptions.split("/");
                data[i].answer = "";

            } else if (data[i].qbtpye == "填空题") {
                data[i].answer = [];
                console.log(data[i].qboptions)
                for (var j = 0; j < data[i].qboptions; j++) {
                    var obj = new Object();
                    obj.content = ""
                    data[i].answer.push(obj);
                }
            } else if (data[i].qbtpye == "多选题") {
                data[i].qboptions = data[i].qboptions.split("/");
                data[i].answer = [];
            } else if (data[i].qbtpye == "问答题") {
                data[i].answer = "";
            }

        }
        console.log(data)
        var name = [];
        for (var i = 0; i < data.length; i++) {
            var flage = true;
            for (var j = 0; j < name.length; j++) {
                if (name[j].dati == data[i].tqbigtitle) {
                    flage = false;
                    break;
                }
            }
            if (flage) {
                var obj = new Object();
                obj.dati = data[i].tqbigtitle;
                obj.list = [];
                name.push(obj);
            }
        }
        for (var k = 0; k < data.length; k++) {
            for (var p = 0; p < name.length; p++) {
                if (name[p].dati == data[k].tqbigtitle) {
                    name[p].list.push(data[k]);
                }
            }
        }
        return name;
    }
</script>
</html>